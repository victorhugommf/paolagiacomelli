!function(){var e={4184:function(e,t){var s;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var i=typeof s;if("string"===i||"number"===i)e.push(s);else if(Array.isArray(s)){if(s.length){var a=r.apply(null,s);a&&e.push(a)}}else if("object"===i)if(s.toString===Object.prototype.toString)for(var o in s)n.call(s,o)&&s[o]&&e.push(o);else e.push(s.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(s=function(){return r}.apply(t,[]))||(e.exports=s)}()},7145:function(e,t){"use strict";function s(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var n="object"==typeof process&&!0;function r(e,t){if(!e){if(n)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=r;var i=Object.prototype.hasOwnProperty,a=Array.prototype.splice,o=Object.prototype.toString;function l(e){return o.call(e).slice(8,-1)}var c=Object.assign||function(e,t){return p(t).forEach((function(s){i.call(t,s)&&(e[s]=t[s])})),e},p="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function u(e){return Array.isArray(e)?c(e.constructor(e.length),e):"Map"===l(e)?new Map(e):"Set"===l(e)?new Set(e):e&&"object"==typeof e?c(Object.create(Object.getPrototypeOf(e)),e):e}var d=function(){function e(){this.commands=c({},h),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var s=this,n="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(n)||r(!Array.isArray(n),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),r("object"==typeof n&&null!==n,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(s.commands).join(", ")+"."}));var a=e;return p(n).forEach((function(t){if(i.call(s.commands,t)){var r=e===a;a=s.commands[t](n[t],a,n,e),r&&s.isEquals(a,e)&&(a=e)}else{var o="Map"===l(e)?s.update(e.get(t),n[t]):s.update(e[t],n[t]),c="Map"===l(a)?a.get(t):a[t];s.isEquals(o,c)&&(void 0!==o||i.call(e,t))||(a===e&&(a=u(e)),"Map"===l(a)?a.set(t,o):a[t]=o)}})),a},e}();t.Context=d;var h={$push:function(e,t,s){return f(t,s,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,s){return f(t,s,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,n,i){return function(e,t){r(Array.isArray(e),(function(){return"Expected $splice target to be an array; got "+s(e)})),y(t.$splice)}(t,n),e.forEach((function(e){y(e),t===i&&e.length&&(t=u(i)),a.apply(t,e)})),t},$set:function(e,t,s){return function(e){r(1===Object.keys(e).length,(function(){return"Cannot have more than one key in an object with $set"}))}(s),e},$toggle:function(e,t){g(e,"$toggle");var s=e.length?u(t):t;return e.forEach((function(e){s[e]=!t[e]})),s},$unset:function(e,t,s,n){return g(e,"$unset"),e.forEach((function(e){Object.hasOwnProperty.call(t,e)&&(t===n&&(t=u(n)),delete t[e])})),t},$add:function(e,t,s,n){return v(t,"$add"),g(e,"$add"),"Map"===l(t)?e.forEach((function(e){var s=e[0],r=e[1];t===n&&t.get(s)!==r&&(t=u(n)),t.set(s,r)})):e.forEach((function(e){t!==n||t.has(e)||(t=u(n)),t.add(e)})),t},$remove:function(e,t,s,n){return v(t,"$remove"),g(e,"$remove"),e.forEach((function(e){t===n&&t.has(e)&&(t=u(n)),t.delete(e)})),t},$merge:function(e,t,n,i){var a,o;return a=t,r((o=e)&&"object"==typeof o,(function(){return"update(): $merge expects a spec of type 'object'; got "+s(o)})),r(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+s(a)})),p(e).forEach((function(s){e[s]!==t[s]&&(t===i&&(t=u(i)),t[s]=e[s])})),t},$apply:function(e,t){var n;return r("function"==typeof(n=e),(function(){return"update(): expected spec of $apply to be a function; got "+s(n)+"."})),e(t)}},m=new d;function f(e,t,n){r(Array.isArray(e),(function(){return"update(): expected target of "+s(n)+" to be an array; got "+s(e)+"."})),g(t[n],n)}function g(e,t){r(Array.isArray(e),(function(){return"update(): expected spec of "+s(t)+" to be an array; got "+s(e)+". Did you forget to wrap your parameter in an array?"}))}function y(e){r(Array.isArray(e),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+s(e)+". Did you forget to wrap your parameters in an array?"}))}function v(e,t){var n=l(e);r("Map"===n||"Set"===n,(function(){return"update(): "+s(t)+" expects a target of type Set or Map; got "+s(n)}))}t.isEquals=m.update.isEquals,t.extend=m.extend,t.default=m.update,t.default.default=e.exports=c(t.default,t)}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,s),i.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.React,n=s.n(t),r=window.ReactDOM,i=window.wp.domReady,a=s.n(i);class o extends n().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(e),console.error(t)}render(){return this.state.hasError?(0,e.createElement)("div",{className:"sui-notice sui-notice-error"},(0,e.createElement)("div",{className:"sui-notice-content"},(0,e.createElement)("div",{className:"sui-notice-message"},(0,e.createElement)("span",{className:"sui-notice-icon sui-icon-warning-alert sui-md","aria-hidden":"true"}),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,"Something went wrong. Please contact ",(0,e.createElement)("a",{target:"_blank",href:"https://wpmudev.com/get-support/"},"support"),"."))))):this.props.children}}var l=o;function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var p=s(7145),u=s.n(p),d=window.wp.i18n;class h extends n().Component{constructor(e){super(e),this.state={}}handleRemove(e){const{index:t,onRemove:s}=this.props;e.preventDefault(),s(t)}render(){const{index:t,recipient:s,fieldName:r}=this.props;return(0,e.createElement)("div",{className:"wds-recipient sui-recipient"},(0,e.createElement)("span",{className:"sui-recipient-name"},s.name),(0,e.createElement)("span",{className:"sui-recipient-email"},s.email),(0,e.createElement)("span",null,r&&(0,e.createElement)("a",{className:"sui-button-icon",href:"#","aria-label":(0,d.__)("Delete email recipient","wds"),onClick:e=>this.handleRemove(e)},(0,e.createElement)("span",{className:"sui-icon-trash","aria-hidden":"true"}))),r&&(0,e.createElement)(n().Fragment,null,(0,e.createElement)("input",{type:"hidden",name:r+"["+t+"][name]",value:s.name}),(0,e.createElement)("input",{type:"hidden",name:r+"["+t+"][email]",value:s.email})))}}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}c(h,"defaultProps",{index:"",recipient:"",fieldName:"",onRemove:()=>!1});var f=s(4184),g=s.n(f);class y extends n().Component{handleClick(e){e.preventDefault(),this.props.onClick()}render(){let t,s;this.props.href?(t="a",s={href:this.props.href,target:this.props.target}):(t="button",s={disabled:this.props.disabled,onClick:e=>this.handleClick(e)});const r=this.props.text&&this.props.text.trim();return(0,e.createElement)(n().Fragment,null,(0,e.createElement)(t,m({},s,{className:g()(this.props.className,"sui-button-"+this.props.color,{"sui-button-onload":this.props.loading,"sui-button-ghost":this.props.ghost,"sui-button-icon":!r,"sui-button-dashed":this.props.dashed,"sui-button":r}),id:this.props.id}),this.text(),this.loadingIcon()))}text(){const t=this.props.icon?(0,e.createElement)("span",{className:this.props.icon,"aria-hidden":"true"}):"";return(0,e.createElement)("span",{className:g()({"sui-loading-text":this.props.loading})},t," ",this.props.text)}loadingIcon(){return this.props.loading?(0,e.createElement)("span",{className:"sui-icon-loader sui-loading","aria-hidden":"true"}):""}}c(y,"defaultProps",{id:"",text:"",color:"",dashed:!1,icon:!1,loading:!1,ghost:!1,disabled:!1,href:"",target:"",className:"",onClick:()=>!1});var v=SUI,E=s.n(v),b=jQuery,w=s.n(b);class N extends n().Component{constructor(e){super(e),this.props=e}componentDidMount(){E().openModal(this.props.id,this.props.focusAfterClose,this.props.focusAfterOpen?this.props.focusAfterOpen:this.getTitleId(),!1,!1)}componentWillUnmount(){E().closeModal()}handleKeyDown(e){w()(e.target).is(".sui-modal.sui-active input")&&13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),!this.props.enterDisabled&&this.props.onEnter&&this.props.onEnter(e))}render(){const t=this.getHeaderActions(),s=Object.assign({},{"sui-modal-sm":this.props.small,"sui-modal-lg":!this.props.small},this.props.dialogClasses);return(0,e.createElement)("div",{className:g()("sui-modal",s),onKeyDown:e=>this.handleKeyDown(e)},(0,e.createElement)("div",{role:"dialog",id:this.props.id,className:g()("sui-modal-content",this.props.id+"-modal"),"aria-modal":"true","aria-labelledby":this.props.id+"-modal-title","aria-describedby":this.props.id+"-modal-description"},(0,e.createElement)("div",{className:"sui-box",role:"document"},(0,e.createElement)("div",{className:g()("sui-box-header",{"sui-flatten sui-content-center sui-spacing-top--40":this.props.small})},this.props.beforeTitle,(0,e.createElement)("h3",{id:this.getTitleId(),className:g()("sui-box-title",{"sui-lg":this.props.small})},this.props.title),t),(0,e.createElement)("div",{className:g()("sui-box-body",{"sui-content-center":this.props.small})},this.props.description&&(0,e.createElement)("p",{className:"sui-description",id:this.props.id+"-modal-description"},this.props.description),this.props.children),this.props.footer&&(0,e.createElement)("div",{className:"sui-box-footer"},this.props.footer))))}getTitleId(){return this.props.id+"-modal-title"}getHeaderActions(){const t=this.getCloseButton();return this.props.small?t:this.props.headerActions?this.props.headerActions:(0,e.createElement)("div",{className:"sui-actions-right"},t)}getCloseButton(){return(0,e.createElement)("button",{id:this.props.id+"-close-button",type:"button",onClick:()=>this.props.onClose(),disabled:this.props.disableCloseButton,className:g()("sui-button-icon",{"sui-button-float--right":this.props.small})},(0,e.createElement)("span",{className:"sui-icon-close sui-md","aria-hidden":"true"}),(0,e.createElement)("span",{className:"sui-screen-reader-text"},(0,d.__)("Close this dialog window","wds")))}}c(N,"defaultProps",{id:"",title:"",description:"",small:!1,headerActions:!1,focusAfterOpen:"",focusAfterClose:"container",dialogClasses:[],disableCloseButton:!1,enterDisabled:!1,onEnter:!1,beforeTitle:!1,onClose:()=>!1});class C extends n().Component{render(){const{label:t,isRequired:s,errorMessage:n,description:r,isValid:i}=this.props,a=this.props.formControl;return(0,e.createElement)("div",{className:g()("sui-form-field",{"sui-form-field-error":!i})},(0,e.createElement)("label",{className:"sui-label"},t," ",s&&(0,e.createElement)("span",{className:"wds-required-asterisk"},"*")),(0,e.createElement)(a,this.props),!i&&!!n&&(0,e.createElement)("span",{className:"sui-error-message",role:"alert"},n),!!r&&(0,e.createElement)("p",{className:"sui-description"},(0,e.createElement)("small",null,r)))}}c(C,"defaultProps",{label:"",description:"",errorMessage:"",isValid:!0,isRequired:!1,formControl:!1});class x extends n().Component{render(){const{id:t,value:s,placeholder:n,disabled:r,onChange:i}=this.props;return(0,e.createElement)("input",{id:t,type:"text",className:"sui-form-control",onChange:e=>i(e.target.value),value:s,disabled:r,placeholder:n})}}c(x,"defaultProps",{id:"",value:"",placeholder:"",disabled:!1,onChange:()=>!1});class A extends n().Component{render(){return(0,e.createElement)(C,m({},this.props,{formControl:x}))}}const _=e=>e&&e.trim(),O=e=>{var t;const s=(new DOMParser).parseFromString(e,"text/html");return(null==s||null===(t=s.body)||void 0===t?void 0:t.textContent)===e};var j=function(t,s){var r,i;return i=r=class extends n().Component{constructor(e){super(e);const{value:t,validateOnInit:s}=this.props;s?this.handleChange(t):(this.isValid=!0,this.errorMessage="")}validateValue(e){Array.isArray(s)?s.some((t=>{if(this.isValid=this.runValidator(t,e),this.errorMessage=this.isValid?"":this.getErrorMessage(t),!this.isValid)return!0})):(this.isValid=this.runValidator(s,e),this.errorMessage=this.isValid?"":this.getErrorMessage(s))}getErrorMessage(e){let t="";return e.getError instanceof Function&&(t=e.getError()),t}runValidator(e,t){let s;return e.isValid instanceof Function?s=e.isValid(t):e instanceof Function&&(s=e(t)),s}handleChange(e){this.validateValue(e),this.props.onChange(e,this.isValid)}render(){return(0,e.createElement)(t,m({},this.props,{isValid:this.isValid,errorMessage:this.errorMessage,onChange:e=>this.handleChange(e)}))}},c(r,"defaultProps",{value:"",validateOnInit:!1,onChange:()=>!1}),i};const $=j(A,[_,O]),S=j(A,[_,O,new class{constructor(e,t){this.func=e,this.errorMessage=t}isValid(e){return this.func(e)}getError(){return this.errorMessage}}((e=>!!e.toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)),(0,d.__)("Email is invalid.","wds"))]);class M extends n().Component{constructor(e){super(e),this.state={name:"",email:"",isNameValid:!0,isEmailValid:!0}}render(){const{id:t,onClose:s}=this.props,{name:r,email:i,isNameValid:a,isEmailValid:o}=this.state,l=!a||!o;return(0,e.createElement)(N,{id:t,title:(0,d.__)("Add Recipient","wds"),description:(0,d.__)("Add as many recipients as you like, they will receive email reports as per the schedule you set.","wds"),small:!0,onEnter:()=>this.handleSubmit(),enterDisabled:l,onClose:s,footer:(0,e.createElement)(n().Fragment,null,(0,e.createElement)(y,{className:"wds-cancel-button",ghost:!0,text:(0,d.__)("Cancel","wds"),onClick:s}),(0,e.createElement)("div",{className:"sui-actions-right"},(0,e.createElement)(y,{id:"wds-add-email-recipient",text:(0,d.__)("Add","wds"),onClick:()=>this.handleSubmit(),disabled:l})))},(0,e.createElement)($,{id:"wds-recipient-name",label:(0,d.__)("First name","wds"),placeholder:(0,d.__)("E.g. John","wds"),value:r,onChange:(e,t)=>this.handleChangeName(e,t),isValid:a}),(0,e.createElement)(S,{id:"wds-recipient-email",label:(0,d.__)("Email address","wds"),placeholder:(0,d.__)("E.g. john@doe.com","wds"),value:i,onChange:(e,t)=>this.handleChangeEmail(e,t),isValid:o}))}handleSubmit(){const{name:e,email:t}=this.state;this.props.onSubmit(e,t)}handleChangeName(e,t){this.setState({name:e,isNameValid:t})}handleChangeEmail(e,t){this.setState({email:e,isEmailValid:t})}}c(M,"defaultProps",{id:"",onSubmit:()=>!1,onClose:()=>!1});class P extends n().Component{render(){const t=this.getIcon(this.props.type);return(0,e.createElement)("div",{className:g()("sui-notice","sui-notice-"+this.props.type,this.props.className)},(0,e.createElement)("div",{className:"sui-notice-content"},(0,e.createElement)("div",{className:"sui-notice-message"},t&&(0,e.createElement)("span",{className:g()("sui-notice-icon sui-md",t),"aria-hidden":"true"}),(0,e.createElement)("p",null,this.props.message))))}getIcon(e){return{warning:"sui-icon-warning-alert",error:"sui-icon-warning-alert",info:"sui-icon-info",success:"sui-icon-check-tick",purple:"sui-icon-info","":"sui-icon-info"}[e]}}c(P,"defaultProps",{type:"warning",message:""});class V extends n().Component{render(){return(0,e.createElement)("div",{className:"sui-floating-notices"},(0,e.createElement)("div",{role:"alert",id:this.props.id,className:"sui-notice","aria-live":"assertive"}))}}c(V,"defaultProps",{id:""});class k extends n().Component{constructor(e){super(e),this.state={recipients:this.props.recipients,openDialog:!1}}render(){const{id:t,fieldName:s}=this.props,{recipients:r,openDialog:i}=this.state;return(0,e.createElement)(n().Fragment,null,(0,e.createElement)(V,{id:"wds-email-recipient-notice"}),!r.length&&(0,e.createElement)(P,{type:"warning",message:(0,d.__)("You've removed all recipients. If you save without a recipient, we'll automatically turn off reports.","wds")}),(0,e.createElement)("div",null,r.map(((t,n)=>(0,e.createElement)(h,{key:n,index:n,recipient:t,fieldName:s,onRemove:e=>this.handleRemove(e)})))),(0,e.createElement)(y,{ghost:!0,icon:"sui-icon-plus",onClick:()=>this.toggleModal(),text:(0,d.__)("Add Recipient","wds")}),i&&(0,e.createElement)(M,{id:t,onSubmit:(e,t)=>this.handleAdd(e,t),onClose:()=>this.toggleModal()}))}handleAdd(e,t){this.setState({recipients:u()([{name:e,email:t}],{$push:this.state.recipients}),openDialog:!1},(()=>{(class{static showSuccessNotice(e,t,s=!0){return this.showNotice(e,t,"success",s)}static showErrorNotice(e,t,s=!0){return this.showNotice(e,t,"error",s)}static showInfoNotice(e,t,s=!0){return this.showNotice(e,t,"info",s)}static showWarningNotice(e,t,s=!0){return this.showNotice(e,t,"warning",s)}static closeNotice(e){SUI.closeNotice(e)}static showNotice(e,t,s="success",n=!0){SUI.closeNotice(e),SUI.openNotice(e,"<p>"+t+"</p>",{type:s,icon:{error:"warning-alert",info:"info",warning:"warning-alert",success:"check-tick"}[s],dismiss:{show:n}})}}).showInfoNotice("wds-email-recipient-notice",(0,d.sprintf)((0,d.__)("%s has been added as a recipient. Please save your changes to set this live.","wds"),e),!1)}))}handleRemove(e){this.setState({recipients:u()(this.state.recipients,{$splice:[[e,1]]})})}toggleModal(){this.setState({openDialog:!this.state.openDialog})}}c(k,"defaultProps",{id:"",recipients:"",fieldName:""});var D=class{static get(e,t="general"){Array.isArray(e)||(e=[e]);let s=window["_wds_"+t]||{};return e.forEach((e=>{s=s&&s.hasOwnProperty(e)?s[e]:""})),s}static get_bool(e,t="general"){return!!this.get(e,t)}};a()((()=>{const t=document.getElementById("wds-email-recipients");if(t){const s=D.get("id","email_recipients"),n=D.get("recipients","email_recipients"),i=D.get("field_name","email_recipients");(0,r.render)((0,e.createElement)(l,null,(0,e.createElement)(k,{id:s,recipients:n,fieldName:i})),t)}}))}()}();