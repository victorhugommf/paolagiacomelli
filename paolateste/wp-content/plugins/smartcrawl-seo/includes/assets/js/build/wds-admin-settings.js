!function(){var e={4184:function(e,t){var s;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var s=arguments[t];if(s){var n=typeof s;if("string"===n||"number"===n)e.push(s);else if(Array.isArray(s)){if(s.length){var i=o.apply(null,s);i&&e.push(i)}}else if("object"===n){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){e.push(s.toString());continue}for(var a in s)r.call(s,a)&&s[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(s=function(){return o}.apply(t,[]))||(e.exports=s)}()}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";var e=window.wp.element,t=window.ReactDOM,r=window.React,o=s.n(r);class n extends o().Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(e),console.error(t)}render(){return this.state.hasError?(0,e.createElement)("div",{className:"sui-notice sui-notice-error"},(0,e.createElement)("div",{className:"sui-notice-content"},(0,e.createElement)("div",{className:"sui-notice-message"},(0,e.createElement)("span",{className:"sui-notice-icon sui-icon-warning-alert sui-md","aria-hidden":"true"}),(0,e.createElement)("p",null,(0,e.createElement)("strong",null,"Something went wrong. Please contact ",(0,e.createElement)("a",{target:"_blank",href:"https://wpmudev.com/get-support/"},"support"),"."))))):this.props.children}}var i=n;function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a.apply(this,arguments)}var l=s(4184),c=s.n(l);class d extends o().Component{static defaultProps={id:"",text:"",color:"",dashed:!1,icon:!1,loading:!1,ghost:!1,disabled:!1,href:"",target:"",className:"",onClick:()=>!1};handleClick(e){e.preventDefault(),this.props.onClick()}render(){let t,s;this.props.href?(t="a",s={href:this.props.href,target:this.props.target}):(t="button",s={disabled:this.props.disabled,onClick:e=>this.handleClick(e)});const r=this.props.text&&this.props.text.trim();return(0,e.createElement)(o().Fragment,null,(0,e.createElement)(t,a({},s,{className:c()(this.props.className,"sui-button-"+this.props.color,{"sui-button-onload":this.props.loading,"sui-button-ghost":this.props.ghost,"sui-button-icon":!r,"sui-button-dashed":this.props.dashed,"sui-button":r}),id:this.props.id}),this.text(),this.loadingIcon()))}text(){const t=this.props.icon?(0,e.createElement)("span",{className:this.props.icon,"aria-hidden":"true"}):"";return(0,e.createElement)("span",{className:c()({"sui-loading-text":this.props.loading})},t," ",this.props.text)}loadingIcon(){return this.props.loading?(0,e.createElement)("span",{className:"sui-icon-loader sui-loading","aria-hidden":"true"}):""}}var u=window.wp.i18n,p=SUI,h=s.n(p),m=jQuery,g=s.n(m);class f extends o().Component{static defaultProps={id:"",title:"",description:"",small:!1,headerActions:!1,focusAfterOpen:"",focusAfterClose:"container",dialogClasses:[],disableCloseButton:!1,enterDisabled:!1,onEnter:!1,beforeTitle:!1,onClose:()=>!1};constructor(e){super(e),this.props=e}componentDidMount(){h().openModal(this.props.id,this.props.focusAfterClose,this.props.focusAfterOpen?this.props.focusAfterOpen:this.getTitleId(),!1,!1)}componentWillUnmount(){h().closeModal()}handleKeyDown(e){g()(e.target).is(".sui-modal.sui-active input")&&13===e.keyCode&&(e.preventDefault(),e.stopPropagation(),!this.props.enterDisabled&&this.props.onEnter&&this.props.onEnter(e))}render(){const t=this.getHeaderActions(),s=Object.assign({},{"sui-modal-sm":this.props.small,"sui-modal-lg":!this.props.small},this.props.dialogClasses);return(0,e.createElement)("div",{className:c()("sui-modal",s),onKeyDown:e=>this.handleKeyDown(e)},(0,e.createElement)("div",{role:"dialog",id:this.props.id,className:c()("sui-modal-content",this.props.id+"-modal"),"aria-modal":"true","aria-labelledby":this.props.id+"-modal-title","aria-describedby":this.props.id+"-modal-description"},(0,e.createElement)("div",{className:"sui-box",role:"document"},(0,e.createElement)("div",{className:c()("sui-box-header",{"sui-flatten sui-content-center sui-spacing-top--40":this.props.small})},this.props.beforeTitle,(0,e.createElement)("h3",{id:this.getTitleId(),className:c()("sui-box-title",{"sui-lg":this.props.small})},this.props.title),t),(0,e.createElement)("div",{className:c()("sui-box-body",{"sui-content-center":this.props.small})},this.props.description&&(0,e.createElement)("p",{className:"sui-description",id:this.props.id+"-modal-description"},this.props.description),this.props.children),this.props.footer&&(0,e.createElement)("div",{className:"sui-box-footer"},this.props.footer))))}getTitleId(){return this.props.id+"-modal-title"}getHeaderActions(){const t=this.getCloseButton();return this.props.small?t:this.props.headerActions?this.props.headerActions:(0,e.createElement)("div",{className:"sui-actions-right"},t)}getCloseButton(){return(0,e.createElement)("button",{id:this.props.id+"-close-button",type:"button",onClick:()=>this.props.onClose(),disabled:this.props.disableCloseButton,className:c()("sui-button-icon",{"sui-button-float--right":this.props.small})},(0,e.createElement)("span",{className:"sui-icon-close sui-md","aria-hidden":"true"}),(0,e.createElement)("span",{className:"sui-screen-reader-text"},(0,u.__)("Close this dialog window","wds")))}}var w=class{static get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";Array.isArray(e)||(e=[e]);let s=window["_wds_"+t]||{};return e.forEach((e=>{s=s&&s.hasOwnProperty(e)?s[e]:""})),s}static get_bool(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"general";return!!this.get(e,t)}},E=ajaxurl,b=s.n(E);class v{static post(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,o){const n=Object.assign({},{action:e,_wds_nonce:t},s);g().post(b(),n).done((e=>{var t;e.success?r(null==e?void 0:e.data):o(null==e||null===(t=e.data)||void 0===t?void 0:t.message)})).fail((()=>o()))}))}static uploadFile(e,t,s){const r=new FormData;return r.append("file",s),r.append("action",e),r.append("_wds_nonce",t),new Promise(((e,t)=>{g().ajax({url:b(),cache:!1,contentType:!1,processData:!1,type:"post",data:r}).done((s=>{var r;s.success?e(null==s?void 0:s.data):t(null==s||null===(r=s.data)||void 0===r?void 0:r.message)})).fail((()=>t()))}))}}class _ extends r.Component{static defaultProps={onClose:()=>!1,afterReset:()=>!1,onError:()=>!1};constructor(e){super(e),this.state={requestInProgress:!1}}resetData(){this.requestInProgress(!0).then((()=>{this.post("wds_data_reset").then((()=>{this.props.afterReset()})).finally((()=>this.requestInProgress(!1))).catch((()=>this.props.onError()))}))}requestInProgress(e){return new Promise((t=>{this.setState({requestInProgress:e},t)}))}render(){return(0,e.createElement)(f,{id:"wds-data-reset-modal",title:(0,u.__)("Reset Settings & Data","wds"),description:(0,u.__)("Are you sure you want to reset SmartCrawl’s settings and data back to the factory defaults?","wds"),focusAfterOpen:"wds-data-reset-cancel-button",focusAfterClose:"wds-data-reset-button",disableCloseButton:this.state.requestInProgress,onClose:()=>this.props.onClose(),small:!0},(0,e.createElement)(d,{id:"wds-data-reset-cancel-button",text:(0,u.__)("Cancel","wds"),ghost:!0,disabled:this.state.requestInProgress,onClick:()=>this.props.onClose()}),(0,e.createElement)(d,{ghost:!0,color:"red",icon:"sui-icon-refresh",loading:this.state.requestInProgress,onClick:()=>this.resetData(),text:(0,u.__)("Reset","wds")}))}post(e){const t=w.get("nonce","reset");return v.post(e,t)}}class C extends o().Component{static defaultProps={id:""};render(){return(0,e.createElement)("div",{className:"sui-floating-notices"},(0,e.createElement)("div",{role:"alert",id:this.props.id,className:"sui-notice","aria-live":"assertive"}))}}class N{static showSuccessNotice(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.showNotice(e,t,"success",s)}static showErrorNotice(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.showNotice(e,t,"error",s)}static showInfoNotice(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.showNotice(e,t,"info",s)}static showWarningNotice(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.showNotice(e,t,"warning",s)}static closeNotice(e){SUI.closeNotice(e)}static showNotice(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];SUI.closeNotice(e),SUI.openNotice(e,"<p>"+t+"</p>",{type:s,icon:{error:"warning-alert",info:"info",warning:"warning-alert",success:"check-tick"}[s],dismiss:{show:r}})}}class y extends o().Component{constructor(e){super(e),this.state={resetInProgress:!1}}startResetting(){this.setState({resetInProgress:!0})}stopResetting(){this.setState({resetInProgress:!1})}resetSuccessful(){this.stopResetting(),N.showSuccessNotice("wds-data-reset-notice",(0,u.__)("Data and settings have been reset successfully!","wds"),!1),setTimeout((()=>window.location.reload()),1500)}showErrorMessage(){N.showErrorNotice("wds-data-reset-notice",(0,u.__)("We could not reset your site due to an error.","wds"),!1)}render(){return(0,e.createElement)(o().Fragment,null,(0,e.createElement)(C,{id:"wds-data-reset-notice"}),(0,e.createElement)(d,{id:"wds-data-reset-button",icon:"sui-icon-refresh",ghost:!0,text:(0,u.__)("Reset","wds"),onClick:()=>this.startResetting()}),this.state.resetInProgress&&(0,e.createElement)(_,{onClose:()=>this.stopResetting(),afterReset:()=>this.resetSuccessful(),onError:()=>this.showErrorMessage()}))}}class P extends o().Component{static defaultProps={progress:"",stateMessage:""};render(){const t=Math.ceil(this.props.progress),s=t+"%";return(0,e.createElement)(o().Fragment,null,(0,e.createElement)("div",{className:"sui-progress-block"},(0,e.createElement)("div",{className:"sui-progress"},(0,e.createElement)("span",{className:"sui-progress-icon","aria-hidden":"true"},(0,e.createElement)("span",{className:"sui-icon-loader sui-loading"})),(0,e.createElement)("div",{className:"sui-progress-text"},s),(0,e.createElement)("div",{className:"sui-progress-bar"},(0,e.createElement)("span",{style:{transition:0!==t&&"transform 0.4s linear 0s",transformOrigin:"left center",transform:`translateX(${t-100}%)`}})))),(0,e.createElement)("div",{className:"sui-progress-state"},this.props.stateMessage))}}class x extends o().Component{static defaultProps={onClose:()=>!1,afterReset:()=>!1,onError:()=>!1};constructor(e){super(e),this.state={modalState:"actions",requestInProgress:!1,progress:0,progressMessage:""}}resetData(){this.setState({modalState:"progress",requestInProgress:!0},(()=>{this.post("wds_multisite_data_reset").then((e=>{const t=e.total_sites,s=e.completed_sites,r=e.progress_message,o=t>0?s/t*100:0;this.setState({progress:o,progressMessage:r},(()=>{t!==s?this.resetData():this.props.afterReset()}))})).catch((()=>{this.setState({modalState:"actions",requestInProgress:!1},(()=>this.props.onError()))}))}))}isModalState(e){return this.state.modalState===e}render(){const t=this.isModalState("progress")?(0,u.__)("Resetting your subsite settings, please keep this window open …","wds"):(0,u.__)("Are you sure you want to reset all the subsites?","wds");return(0,e.createElement)(f,{id:"wds-multisite-data-reset-modal",title:(0,u.__)("Reset Subsites","wds"),description:t,disableCloseButton:this.state.requestInProgress,focusAfterOpen:"wds-multisite-reset-cancel-button",focusAfterClose:"wds-multisite-reset-button",onClose:()=>this.props.onClose(),small:!0},this.isModalState("actions")&&this.getActionButtons(),this.isModalState("progress")&&this.getProgressBar())}getActionButtons(){return(0,e.createElement)(o().Fragment,null,(0,e.createElement)(d,{id:"wds-multisite-reset-cancel-button",text:(0,u.__)("Cancel","wds"),ghost:!0,disabled:this.state.requestInProgress,onClick:()=>this.props.onClose()}),(0,e.createElement)(d,{ghost:!0,color:"red",icon:"sui-icon-refresh",loading:this.state.requestInProgress,onClick:()=>this.resetData(),text:(0,u.__)("Reset","wds")}))}getProgressBar(){const t=(0,e.createInterpolateElement)(this.state.progressMessage,{strong:(0,e.createElement)("strong",null)});return(0,e.createElement)(P,{progress:this.state.progress,stateMessage:t})}post(e){const t=w.get("multisite_nonce","reset");return v.post(e,t)}}class S extends o().Component{constructor(e){super(e),this.state={resetInProgress:!1}}startResetting(){this.setState({resetInProgress:!0})}stopResetting(){this.setState({resetInProgress:!1})}resetSuccessful(){this.stopResetting(),N.showSuccessNotice("wds-multisite-reset-notice",(0,u.__)("Data and settings for all subsites have been reset successfully!","wds"),!1),setTimeout((()=>window.location.reload()),1500)}showErrorMessage(){N.showErrorNotice("wds-multisite-reset-notice",(0,u.__)("We could not reset your network due to an unknown error. Please try again.","wds"),!1)}render(){return(0,e.createElement)(o().Fragment,null,(0,e.createElement)(C,{id:"wds-multisite-reset-notice"}),(0,e.createElement)(d,{color:"red",ghost:!0,id:"wds-multisite-reset-button",text:(0,u.__)("Reset Subsites","wds"),onClick:()=>this.startResetting()}),this.state.resetInProgress&&(0,e.createElement)(x,{onClose:()=>this.stopResetting(),afterReset:()=>this.resetSuccessful(),onError:()=>this.showErrorMessage()}))}}!function(s){const r=document.getElementById("wds-data-reset-button-placeholder");r&&(0,t.render)((0,e.createElement)(i,null,(0,e.createElement)(y,null)),r);const o=document.getElementById("wds-multisite-reset-button-placeholder");function n(){var e=s(this),t=e.closest(".wds-custom-meta-tags").find(".wds-custom-meta-tag:first-of-type").clone();t.insertBefore(e),t.find("input").val("").trigger("focus")}o&&(0,t.render)((0,e.createElement)(i,null,(0,e.createElement)(S,null)),o),window.Wds=window.Wds||{},s((function(){window.Wds.styleable_file_input(),s(document).on("click",".wds-custom-meta-tags button",n),Wds.vertical_tabs()}))}(jQuery)}()}();